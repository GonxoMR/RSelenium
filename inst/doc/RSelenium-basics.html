<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>RSelenium basics</title>





<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 12px;
   margin: 8px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 { 
   font-size:2.2em; 
}

h2 { 
   font-size:1.8em; 
}

h3 { 
   font-size:1.4em; 
}

h4 { 
   font-size:1.0em; 
}

h5 { 
   font-size:0.9em; 
}

h6 { 
   font-size:0.8em; 
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre {	
   margin-top: 0;
   max-width: 95%;
   border: 1px solid #ccc;
   white-space: pre-wrap;
}

pre code {
   display: block; padding: 0.5em;
}

code.r, code.cpp {
   background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * { 
      background: transparent !important; 
      color: black !important; 
      filter:none !important; 
      -ms-filter: none !important; 
   }

   body { 
      font-size:12pt; 
      max-width:100%; 
   }
       
   a, a:visited { 
      text-decoration: underline; 
   }

   hr { 
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote { 
      padding-right: 1em; 
      page-break-inside: avoid; 
   }

   tr, img { 
      page-break-inside: avoid; 
   }

   img { 
      max-width: 100% !important; 
   }

   @page :left { 
      margin: 15mm 20mm 15mm 10mm; 
   }
     
   @page :right { 
      margin: 15mm 10mm 15mm 20mm; 
   }

   p, h2, h3 { 
      orphans: 3; widows: 3; 
   }

   h2, h3 { 
      page-break-after: avoid; 
   }
}
</style>



</head>

<body>
<!--
%\VignetteEngine{knitr::knitr}
%\VignetteIndexEntry{RSelenium basics}
-->

<h1>RSelenium basics</h1>

<h2>Introduction</h2>

<p>The goal of RSelenium is to make it easy to connect to a Selenium Server/ Remote Selenium Server from within R. RSelenium provides R bindings for the Selenium Webdriver API. <a href="http://docs.seleniumhq.org/">Selenium</a> is a project focused on automating web browsers. RSelenium allows you to carry out unit testing and regression testing on your webapps and webpages across a range of browser/OS combinations. This allows us to integrate from within R testing and manipulation of popular projects such as <a href="http://www.rstudio.com/shiny/">shiny</a>, <a href="https://saucelabs.com/">sauceLabs</a>.</p>

<p>This vignette is divided into five main sections:</p>

<ul>
<li><a href="#id1">Connecting to a Selenium Server.</a></li>
<li><a href="#id2">Navigating using RSelenium.</a></li>
<li><a href="#id3">Accessing elements in the DOM.</a></li>
<li><a href="#id4">Sending events to elements.</a></li>
<li><a href="#id5">Injecting JavaScript.</a></li>
</ul>

<p>Each section will be an introduction to a major idea in Selenium, and point to more detailed explanation in other vignettes.</p>

<h2><a id="id1">Connecting to a Selenium Server.</a></h2>

<h3>What is a Selenium Server?</h3>

<p>Selenium Server is  a standalone java program which allows you to run HTML test suites in a range of different browsers, plus extra options like reporting.
You may, or may not, need to run a Selenium Server, depending on how you intend to use Selenium-WebDriver (RSelenium). </p>

<h3>Do I need to run a Selenium Server?</h3>

<p>If you intend to drive a browser on the same machine that RSelenium is running on then you will need to have Selenium Server running on that machine. </p>

<h3>How do I get the Selenium Server stand-alone binary?</h3>

<p>RSelenium has a built-in function that will download the stand-alone java binary and place it in the RSelenium package location in the <code>/bin/</code> directory. If you would like to install elsewhere the function takes a <code>dir</code> argument and can also update an existing binary. </p>

<pre><code>RSelenium::checkForServer()
</code></pre>

<p>If you would like to download the binary manually it is currently found <a href="http://code.google.com/p/selenium/downloads/list">here</a>. Look for <code>selenium-server-standalone-x.xx.x.jar</code>.</p>

<h3>How do I run the Selenium Server?</h3>

<p>There is a utility function included in <code>RSelenium</code> to run an existing stand-alone Selenium Server binary. </p>

<pre><code>RSelenium::startServer()
</code></pre>

<p>By default it looks in the <code>RSelenium</code> package <code>/bin/</code> directory. It has an optional <code>dir</code> argument if your binary is elsewhere. Alternatively you can run the binary manually. Open a console in your OS and navigate to where the binary is located and run:</p>

<pre><code>java -jar selenium-server-standalone-x.xx.x.jar
</code></pre>

<p>By default the <code>Selenium Server</code> listens for connections on port 4444.</p>

<h3>How do I connect to a running server?</h3>

<p><code>RSelenium</code> has a main reference class named <code>remoteDriver</code>. To connect to a server you need to instantiate a new <code>remoteDriver</code> with appropriate options.</p>

<pre><code># RSelenium::startServer() if required
require(RSelenium)
remDr &lt;- remoteDriver(remoteServerAddr = &quot;localhost&quot; 
                      , port = 4444
                      , browserName = &quot;firefox&quot;
                      )
</code></pre>

<p>It would have been sufficient to call <code>remDr &lt;- remoteDriver()</code> but the options where explicitly listed to show how one may connect to an arbitrary ip/port/browser etc. More detail maybe found on the <code>sauceLabs</code> vignette. To connect to the server use the <code>open</code> method.</p>

<pre><code>remDr$open()
</code></pre>

<p>RSelenium should now have a connection to the Selenium Server. You can query the status of the remote Server using the <code>status</code> method.</p>

<pre><code>&gt; remDr$getStatus()
$os
              arch               name            version 
           &quot;amd64&quot;            &quot;Linux&quot; &quot;3.8.0-35-generic&quot; 

$java
   version 
&quot;1.6.0_27&quot; 

$build
             revision                  time               version 
            &quot;ff23eac&quot; &quot;2013-12-16 16:11:15&quot;              &quot;2.39.0&quot; 

</code></pre>

<h1><a id="id2">Navigating using RSelenium.</a></h1>

<h3>Basic Navigation</h3>

<p>To start with we navigate to a url.</p>

<pre><code>remDr$navigate(&quot;http://www.google.com&quot;)
</code></pre>

<p>Then we navigate to a second page.</p>

<pre><code>remDr$navigate(&quot;http://www.bbc.co.uk&quot;)

&gt; remDr$getCurrentUrl()
[[1]]
[1] &quot;http://www.bbc.co.uk/&quot;

</code></pre>

<p>We can go backwards and forwards using the methods <code>goBack</code> and <code>goForward</code>.</p>

<pre><code>remDr$goBack()

&gt; remDr$getCurrentUrl()
[[1]]
[1] &quot;https://www.google.com/&quot;

remDr$goForward()

&gt; remDr$getCurrentUrl()
[[1]]
[1] &quot;http://www.bbc.co.uk/&quot;

</code></pre>

<p>To refresh the current page you can use the refresh method.</p>

<pre><code>remDr$refresh()

</code></pre>

<h2><a id="id3">Accessing elements in the DOM.</a></h2>

<p>The DOM stands for the Document Object Model. It is a cross-platform and language-independent convention for representing and interacting with objects in HTML, XHTML and XML documents. Interacting with the DOM will be very important for us with Selenium and the webDriver provides a number of methods in which to do this.
A basic html page is </p>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;body&gt;

&lt;h1&gt;My First Heading&lt;/h1&gt;

&lt;p&gt;My first paragraph.&lt;/p&gt;

&lt;/body&gt;
&lt;/html&gt;

</code></pre>

<h2><a id="id4">Sending events to elements.</a></h2>

<h2><a id="id5">Injecting JavaScript</a></h2>

</body>

</html>
